---
incident_id: INC-2024-008
severity: high
service: web-frontend
date: 2024-03-12
---

# Load Balancer Health Check Misconfiguration

## Summary
A load balancer configuration change caused healthy backend instances to be marked as unhealthy and removed from rotation, reducing capacity by 70%.

## Impact
- Response times increased to 12 seconds average
- 4,200 timeout errors
- Only 3 of 10 backend servers in rotation
- Duration: 1 hour 15 minutes

## Timeline
- 14:00 UTC: Load balancer config deployed
- 14:05 UTC: Healthy backends marked unhealthy
- 14:08 UTC: Performance degradation alerts
- 14:10 UTC: On-call engineer paged
- 14:20 UTC: Identified health check configuration error
- 14:30 UTC: Rolled back configuration
- 15:15 UTC: All backends healthy and in rotation

## Root Cause
During a routine update, the health check endpoint path was changed from /health to /api/health. However, the backend services only exposed /health endpoint. The load balancer interpreted the 404 responses as unhealthy and removed instances.

## Resolution
1. Rolled back load balancer configuration immediately
2. Verified health check endpoints on all backends
3. Added configuration validation to deployment pipeline
4. Created health check endpoint standardization document

## Prevention
- Implement load balancer config validation before deployment
- Require staging environment validation for LB changes
- Add backend health check endpoint monitoring
- Create load balancer configuration review checklist
- Set up alerts for sudden backend removal from pools
- Document standard health check endpoints across services
