---
incident_id: INC-2024-010
severity: medium
service: external-api
date: 2024-03-26
---

# API Rate Limiting Logic Error

## Summary
A bug in the rate limiting implementation caused legitimate API requests from premium customers to be incorrectly throttled, blocking critical integrations.

## Impact
- 12 enterprise customers affected
- 8,900 legitimate requests blocked
- 3 escalation calls from VP-level contacts
- Duration: 2 hours until full resolution

## Timeline
- 09:00 UTC: Deployment of rate limiting refactor
- 09:15 UTC: First customer complaints received
- 09:30 UTC: Support ticket volume spike detected
- 09:40 UTC: Engineering investigation started
- 10:10 UTC: Rate limiting bug identified
- 10:30 UTC: Hotfix deployed
- 11:00 UTC: Confirmed resolution with affected customers

## Root Cause
During a refactor of the rate limiting logic, the condition checking for premium tier customers was inverted. Instead of exempting premium customers from strict limits, the code was applying the strictest limits only to premium customers.

## Resolution
1. Identified and fixed boolean logic error
2. Deployed hotfix within 30 minutes
3. Manually unblocked affected customer API keys
4. Issued service credits to impacted customers
5. Added integration tests for rate limiting tiers

## Prevention
- Mandate integration tests for rate limiting changes
- Implement canary deployments for API changes
- Add rate limiting metrics by customer tier
- Create synthetic monitoring for premium tier API calls
- Require code review from two engineers for auth/rate limiting changes
- Set up customer tier validation in staging environment
