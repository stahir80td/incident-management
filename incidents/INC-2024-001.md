---
incident_id: INC-2024-001
severity: high
service: user-authentication-service
date: 2024-01-15
---

# Database Connection Pool Exhaustion

## Summary
User authentication service experienced intermittent 503 errors due to database connection pool exhaustion. Users were unable to log in for approximately 45 minutes during peak hours.

## Impact
- 847 failed login attempts
- Peak error rate: 23% of requests
- Affected services: Web portal, Mobile app, API gateway
- Duration: 45 minutes

## Timeline
- 14:23 UTC: First alerts triggered for elevated 5xx errors
- 14:25 UTC: On-call engineer paged
- 14:30 UTC: Identified connection pool exhaustion in logs
- 14:45 UTC: Increased max_connections from 100 to 250
- 15:08 UTC: Service fully recovered, error rate normalized

## Root Cause
The authentication service's database connection pool was configured with a maximum of 100 connections. A gradual increase in concurrent user sessions over the past month, combined with longer-running queries from a new feature deployment, caused the pool to become exhausted during peak traffic hours.

## Resolution
1. Immediately increased connection pool size to 250
2. Added connection pool metrics to monitoring dashboard
3. Implemented connection timeout of 30 seconds
4. Optimized slow queries identified in the new feature

## Prevention
- Set up alerting for connection pool utilization above 70%
- Implement quarterly capacity review for all database-backed services
- Add connection pool sizing to service deployment checklist
- Create runbook for connection pool exhaustion scenarios
