---
incident_id: INC-2024-017
severity: high
service: container-registry
date: 2024-05-14
---

# Container Registry Authentication Failure

## Summary
Kubernetes cluster unable to pull images from private container registry due to expired authentication tokens, preventing all deployments and pod restarts.

## Impact
- All deployments blocked for 52 minutes
- Pods unable to restart after failures
- Critical security patch deployment delayed
- 3 services experienced degraded capacity

## Timeline
- 11:00 UTC: Registry authentication tokens expired
- 11:05 UTC: First pod restart failures
- 11:10 UTC: Deployment pipeline failures detected
- 11:15 UTC: Engineering team alerted
- 11:25 UTC: Identified expired registry credentials
- 11:35 UTC: Generated new authentication tokens
- 11:42 UTC: Updated secrets in all clusters
- 11:52 UTC: Verified image pulls working
- 12:30 UTC: All affected pods rescheduled successfully

## Root Cause
Container registry authentication tokens were set to expire after 90 days. The automated token rotation process failed silently 7 days prior due to a permissions issue in the rotation service account. No alerts were configured for token expiration.

## Resolution
1. Manually generated new registry tokens
2. Updated Kubernetes imagePullSecrets in all namespaces
3. Fixed permissions for token rotation service account
4. Verified automatic rotation process
5. Triggered immediate token refresh

## Prevention
- Implement token expiration monitoring with 30, 14, 7-day warnings
- Set up alerts for failed automatic token rotation
- Extend token lifetime to 180 days
- Add token validation to daily health checks
- Create emergency token rotation runbook
- Implement redundant authentication methods
- Add registry connectivity monitoring
- Document container registry troubleshooting procedures
