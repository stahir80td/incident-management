---
incident_id: INC-2024-011
severity: high
service: file-upload-service
date: 2024-04-02
---

# S3 Bucket Permission Denied Errors

## Summary
File upload service unable to write to S3 bucket after IAM role policy update, blocking all user file uploads and document processing workflows.

## Impact
- 2,340 failed file uploads
- Document processing pipeline completely blocked
- Customer onboarding workflows stalled
- Duration: 1 hour 42 minutes

## Timeline
- 13:00 UTC: IAM policy update applied
- 13:05 UTC: Upload errors begin appearing
- 13:10 UTC: Error rate alerts triggered
- 13:15 UTC: On-call engineer paged
- 13:30 UTC: Identified IAM permission issue
- 14:00 UTC: Corrected IAM policy deployed
- 14:30 UTC: Verified upload functionality restored
- 14:42 UTC: Reprocessed failed uploads

## Root Cause
An IAM policy update intended to remove write access to deprecated buckets inadvertently removed s3:PutObject permission from the production bucket. The change was applied directly to production without testing in a non-prod environment.

## Resolution
1. Restored correct IAM policy with s3:PutObject permission
2. Verified permissions using AWS Policy Simulator
3. Reprocessed all failed uploads from queue
4. Added missing bucket to allowed resources list

## Prevention
- Implement IAM policy change review process
- Require testing of IAM changes in staging environment
- Set up AWS Config rules to detect permission removals
- Create IAM policy validation in CI/CD pipeline
- Add S3 operation success rate monitoring
- Document IAM policy change procedures
- Require approval from security team for IAM changes
